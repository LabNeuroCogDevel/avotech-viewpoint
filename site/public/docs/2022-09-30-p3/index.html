<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Prisma3 eye tracking -  Eyetracking: Avotec Camera w/Arrington Viewpoint</title>
<meta name="generator" content="Hugo 0.103.0" />
<link href="https://labneurocogdevel.github.io/avotech-viewpoint//index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-30-p3/">
<link rel="stylesheet" href="https://labneurocogdevel.github.io/avotech-viewpoint/css/theme.min.css">
<link rel="stylesheet" href="https://labneurocogdevel.github.io/avotech-viewpoint/css/chroma.min.css">
<script defer src="https://labneurocogdevel.github.io/avotech-viewpoint//js/fontawesome6/all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js" integrity="sha256-H3cjtrm/ztDeuhCN9I4yh4iN2Ybx/y1RM7rMmAesA0k=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js" integrity="sha256-4XodgW4TwIJuDtf+v6vDJ39FVxI0veC/kSCCmnFp7ck=" crossorigin="anonymous"></script>
<script src="https://labneurocogdevel.github.io/avotech-viewpoint/js/bundle.js"></script><style>
:root {}
</style>
<meta property="og:title" content="Prisma3 eye tracking" />
<meta property="og:description" content="P3 camera has better contrast The illuminator is more focused/less diffuse in P3. Compared to P2, P3&#39;s camera image is darker on the outsides of the illuminated circle, but the contrast within is higher. This is visible in the camera image montage captured during calibration:
(P3 runs older software and doesn&#39;t draw pupil detection. montage is manually constructed)
Arrington pupil detection is noticibly more stable.
A video of the tracking on P3 does a better job showing how stable pupil detection is: https://photos." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-30-p3/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2022-09-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-30T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Prisma3 eye tracking"/>
<meta name="twitter:description" content="P3 camera has better contrast The illuminator is more focused/less diffuse in P3. Compared to P2, P3&#39;s camera image is darker on the outsides of the illuminated circle, but the contrast within is higher. This is visible in the camera image montage captured during calibration:
(P3 runs older software and doesn&#39;t draw pupil detection. montage is manually constructed)
Arrington pupil detection is noticibly more stable.
A video of the tracking on P3 does a better job showing how stable pupil detection is: https://photos."/>
<meta itemprop="name" content="Prisma3 eye tracking">
<meta itemprop="description" content="P3 camera has better contrast The illuminator is more focused/less diffuse in P3. Compared to P2, P3&#39;s camera image is darker on the outsides of the illuminated circle, but the contrast within is higher. This is visible in the camera image montage captured during calibration:
(P3 runs older software and doesn&#39;t draw pupil detection. montage is manually constructed)
Arrington pupil detection is noticibly more stable.
A video of the tracking on P3 does a better job showing how stable pupil detection is: https://photos."><meta itemprop="datePublished" content="2022-09-30T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-09-30T00:00:00+00:00" />
<meta itemprop="wordCount" content="327">
<meta itemprop="keywords" content="" /></head>
<body><div class="container"><header>
<h1> Eyetracking: Avotec Camera w/Arrington Viewpoint</h1>
</header>


<div class="content-container">
<main><h1>Prisma3 eye tracking</h1>

<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
P3 camera has better contrast
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
The illuminator is more focused/less diffuse in P3.
Compared to P2, P3&#39;s camera image is darker on the outsides of the illuminated circle,
but the contrast within is higher. This is visible in the camera image montage captured during calibration:</p>
<p>
<img src="../images/cal_p2vsP3.png" alt="../images/cal_p2vsP3.png" title="../images/cal_p2vsP3.png" /></p>
<p>
(P3 runs older software and doesn&#39;t draw pupil detection. montage is manually constructed)</p>
<p>
Arrington pupil detection is noticibly more stable.</p>
<p>
<img src="../images/P1_pupil_win.png" alt="../images/P1_pupil_win.png" title="../images/P1_pupil_win.png" /></p>
<p>
A video of the tracking on P3 does a better job showing how stable pupil detection is: <a href="https://photos.app.goo.gl/XwoyX9CgWCVfLDj2A.">https://photos.app.goo.gl/XwoyX9CgWCVfLDj2A.</a></p>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
XGaze position comparison
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>
This is the best Prisma2 calibration obtained after a lot of tweaking (contrast, brightness, threshold, many points re-calibrated, &amp; w/ fresh eyes) compared to
prisma3 on the first go on someone who was already pretty fatigued.</p>
<p>
I didn&#39;t touch any of the adjustments â€“ P3 pupil detection just worked with the loaded settings!</p>
<p>
Despite the low effort, P3 traces have much less noise. (tighter distribution of repored x gaze around fixation points)</p>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
P2 and P3 data
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">source</span>(<span style="color:#e6db74">&#34;./plot_files.R&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(cowplot)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme_set</span>(<span style="color:#a6e22e">theme_cowplot</span>())
</span></span><span style="display:flex;"><span>rnfn <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(f) <span style="color:#a6e22e">gsub</span>(<span style="color:#e6db74">&#39;.*/sub-dan.*run-([12]).*&#39;</span>, <span style="color:#e6db74">&#39;Prisma3-\\1&#39;</span>, f) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">gsub</span>(<span style="color:#e6db74">&#39;.*WF.*&#39;</span>,<span style="color:#e6db74">&#39;Prisma2&#39;</span>,.)
</span></span><span style="display:flex;"><span>infiles <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#a6e22e">Sys.glob</span>(<span style="color:#e6db74">&#39;eye/*dan*txt&#39;</span>), <span style="color:#e6db74">&#39;eye/sub-WF_tape_run2_32_ses-01_task-EC_run-1.txt&#39;</span>)
</span></span><span style="display:flex;"><span>med_all <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">load_files</span>(infiles, fn_fname<span style="color:#f92672">=</span>rnfn) <span style="color:#f92672">%&gt;%</span> fix_norm_from_list
</span></span><span style="display:flex;"><span>med_dot <span style="color:#f92672">&lt;-</span> med_all <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(event<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;dot&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>med_dot <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">group_by</span>(fname) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">summarise</span>(n_dotpos <span style="color:#f92672">=</span> <span style="color:#a6e22e">length</span>(<span style="color:#a6e22e">unique</span>(dot)), n_total<span style="color:#f92672">=</span><span style="color:#a6e22e">n</span>())</span></span></code></pre></div>
</div>
<table>
<thead>
<tr>
<th>fname</th>
<th class="align-right">n_dotpos</th>
<th class="align-right">n_total</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prisma2</td>
<td class="align-right">19</td>
<td class="align-right">1708</td>
</tr>
<tr>
<td>Prisma3-1</td>
<td class="align-right">10</td>
<td class="align-right">301</td>
</tr>
<tr>
<td>Prisma3-2</td>
<td class="align-right">40</td>
<td class="align-right">1199</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-headline-4" class="outline-3">
<h3 id="headline-4">
Raw traces
</h3>
<div id="outline-text-headline-4" class="outline-text-3">
<p>
Good tracking on P2 is still has much less precision/consistency than P3.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>med_dot <span style="color:#f92672">&lt;-</span> med_dot <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#39;2&#39;</span>,fname), event<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;dot&#39;</span>) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(fname, trial) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">mutate</span>(t<span style="color:#f92672">=</span>t<span style="color:#f92672">-</span><span style="color:#a6e22e">min</span>(t))
</span></span><span style="display:flex;"><span>med_dot <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(pos <span style="color:#f92672">%in%</span>
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-0.9</span>, <span style="color:#ae81ff">-.83</span>,<span style="color:#ae81ff">-.82</span>, <span style="color:#ae81ff">-.74</span>,<span style="color:#ae81ff">-.75</span>, <span style="color:#ae81ff">-.43</span>,<span style="color:#ae81ff">-.42</span>,<span style="color:#ae81ff">-.2</span>,<span style="color:#ae81ff">-.24</span>,
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">.9</span>,   <span style="color:#ae81ff">.83</span>, <span style="color:#ae81ff">.82</span>,  <span style="color:#ae81ff">.74</span>,<span style="color:#ae81ff">.75</span>, <span style="color:#ae81ff">.43</span>,   <span style="color:#ae81ff">.42</span>,  <span style="color:#ae81ff">.2</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">aes</span>(x<span style="color:#f92672">=</span>t, y<span style="color:#f92672">=</span>X_CorrectedGaze, color<span style="color:#f92672">=</span>fname) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">#geom_line(aes(group=paste(fname,trial)), alpha=.4) +</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">geom_point</span>(size<span style="color:#f92672">=</span><span style="color:#ae81ff">.5</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">facet_wrap</span>(.~pos) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">lims</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">.6</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">labs</span>(title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Prisma2 (w/extensive calibration) vs Prisma3 (w/quick cal)&#34;</span>, y <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;X Gaze&#34;</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;from&#34;</span>)</span></span></code></pre></div>
</div>
<p><img src="../images/P3vP3-raw.png" alt="../images/P3vP3-raw.png" title="../images/P3vP3-raw.png" /></p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
distribution
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>tighter (narrow distribution) for P3. Much less noise.</p>
<div class="src src-r">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dot_1s <span style="color:#f92672">&lt;-</span> med_dot <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(t<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">.3</span>, t<span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">.5</span>) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">mutate</span>(xnorm<span style="color:#f92672">=</span>X_CorrectedGaze <span style="color:#f92672">-</span> dot)
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(dot_1s) <span style="color:#f92672">+</span> <span style="color:#a6e22e">aes</span>(x<span style="color:#f92672">=</span>xnorm) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_density</span>(alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">.5</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">lims</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-.25</span>, <span style="color:#ae81ff">.25</span>))
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">+</span> <span style="color:#a6e22e">aes</span>(fill<span style="color:#f92672">=</span>fname) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dist relative to median fixation during dot (.3-.5s)&#34;</span>,
</span></span><span style="display:flex;"><span>       fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;from&#34;</span>,
</span></span><span style="display:flex;"><span>       x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;x gaze - median fixation (dot presentation)&#34;</span>)</span></span></code></pre></div>
</div>
<p><img src="../images/P3vP3dist.png" alt="../images/P3vP3dist.png" title="../images/P3vP3dist.png" /></p>
</div>
</div>
</div>
</div>
<div class="edit-meta">
Last updated on 30 Sep 2022


<br>
Published on 30 Sep 2022
<br></div><nav class="pagination"><a class="nav nav-prev" href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/" title="Docs"><i class="fas fa-arrow-left" aria-hidden="true"></i>&nbsp;Prev - Docs</a>
<a class="nav nav-next" href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-22_ellipse/" title="Dark background calibration and ellipse pupil detection">Next - Dark background calibration and ellipse pupil detection <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main>
<div class="sidebar">

<nav class="open-menu">
<ul>
<li class=""><a href="https://labneurocogdevel.github.io/avotech-viewpoint/">Home</a></li>

<li class="parent"><a href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/">Docs</a>
  
<ul class="sub-menu">
<li class="active"><a href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-30-p3/">Prisma3 eye tracking</a></li>
<li class=""><a href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-22_ellipse/">Dark background calibration and ellipse pupil detection</a></li>
<li class=""><a href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-15_tape32/">32 Channel Tape</a></li>
<li class=""><a href="https://labneurocogdevel.github.io/avotech-viewpoint/docs/2022-09-07_32v64/">Arrington/Avotech @ MRRC Prisma 2</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>

</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
